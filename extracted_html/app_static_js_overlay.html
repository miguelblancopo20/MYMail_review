<div id="mymail-overlay" class="mymail-overlay">
  <div class="mymail-spinner"></div>
  <div class="mymail-overlay-text">Procesando...</div>
</div>
<script>
(function() {
    const TARGET_TEXTS = ["Guardar revisiÃ³n y pasar al siguiente", "Saltar sin guardar"];
    const overlayElement = () => document.getElementById('mymail-overlay');

    const resetOverlay = () => {
        const overlay = overlayElement();
        if (overlay) overlay.style.display = 'none';
        document.body.classList.remove('mymail-locked');
    };

    resetOverlay();

    const showOverlay = () => {
        const overlay = overlayElement();
        if (overlay) overlay.style.display = 'flex';
        document.body.classList.add('mymail-locked');
    };

    const disableButtons = () => {
        document.querySelectorAll('button').forEach(btn => {
            btn.disabled = true;
            btn.setAttribute('aria-busy', 'true');
        });
    };

    const bindButtons = () => {
        const buttons = Array.from(document.querySelectorAll('button'))
            .filter(btn => TARGET_TEXTS.includes(btn.innerText.trim()));
        buttons.forEach(btn => {
            if (btn.dataset.mymailBound === '1') return;
            btn.dataset.mymailBound = '1';
            btn.addEventListener('click', () => {
                showOverlay();
                disableButtons();
            });
        });
    };

    const observer = new MutationObserver(bindButtons);
    observer.observe(document.body, { childList: true, subtree: true });
    bindButtons();
})();
</script>
